(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{5616:(e,n,i)=>{"use strict";i.r(n),i.d(n,{default:()=>D});var t=i(7876),l=i(5500),a=i(9390),r=i(9794),s=i(2474),o=i(5191),c=i(4232),d=i(9017),u=i(7957),h=i(4760),x=i(5756),f=i(7710),A=i(5331),g=i(1893),j=i(8149);function v(e){let{publicKey:n}=e,{connection:i}=(0,f.w)(),l=(0,c.useCallback)(async function(e){return await i.getBalance(n)},[i,n]),{data:a}=(0,j.Ay)("accountBalance",l,{suspense:!0}),r=(0,c.useMemo)(()=>new Intl.NumberFormat(void 0,{maximumFractionDigits:1}).format((a||0)/g.Sr),[a]),{wallet:s}=(0,A.v)();return(0,c.useEffect)(()=>{if(s){function e(){(0,j.Tk)("accountBalance",0,{revalidate:!1})}return s.adapter.on("disconnect",e),()=>{s.adapter.off("disconnect",e)}}},[s]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.A,{component:"span",fontSize:22,lineHeight:0,position:"relative",mr:.4,top:-2,sx:{verticalAlign:"middle"},children:"◎"}),r]})}function m(e){let{publicKey:n}=e,i=(0,c.useMemo)(()=>null==n?void 0:n.toBase58(),[n]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.A,{color:"info",sx:{marginRight:1},label:(0,t.jsx)(c.Suspense,{fallback:(0,t.jsx)(u.A,{color:"inherit",size:18,sx:{verticalAlign:"middle"}}),children:(0,t.jsx)(v,{publicKey:n})})}),(0,t.jsx)(r.A,{children:(0,t.jsx)(h.A,{color:"inherit",href:"https://explorer.solana.com/address/".concat(i,"?cluster=devnet"),rel:"noreferrer",target:"_blank",underline:"none",children:(0,t.jsx)("code",{children:i.slice(0,8)})})})]})}var w=i(7737),p=i(9142);function b(e){let{connected:n,disconnect:i}=(0,A.v)(),l=(0,p.A)(i,[i]);return(0,t.jsx)(w.A,{...e,disabled:!n,onClick:l})}var k=i(3801),y=i(3517);function C(e){let{children:n}=e,{publicKey:i}=(0,A.v)(),{connection:l}=(0,f.w)(),{mutate:a}=(0,j.iX)(),{enqueueSnackbar:r}=(0,y.dh)(),[s,o]=(0,c.useState)(!1),d=(0,p.A)(async e=>{let n=await l.requestAirdrop(e,1e8);return await l.confirmTransaction(n)},[l]);return(0,t.jsx)(k.A,{loading:s,color:"primary",disabled:null==i,onClick:async()=>{if(null!=i){o(!0);try{let e=await d(i);if(e){let{value:{err:n}}=e;n?r("Failed to fund account: "+(n instanceof Error?n.message:n),{variant:"error"}):(r("Funding successful",{variant:"success"}),a("accountBalance",e=>e+1e8))}}finally{o(!1)}}},variant:"outlined",children:n})}var S=i(3328),B=i(6741),F=i(3450),_=i(558),M=i(6482),E=i(8523),N=i(7568),T=i(2909).Buffer;function G(e){let{children:n,message:i}=e,{enqueueSnackbar:l}=(0,y.dh)(),{connection:a}=(0,f.w)(),{publicKey:r,sendTransaction:s,wallet:o}=(0,A.v)(),[d,u]=(0,c.useState)(!1),[h,x]=(0,c.useState)(!1),j=null==o?void 0:o.adapter.supportedTransactionVersions,v=(null==j?void 0:j.has(0))?0:"legacy",m=(0,p.A)(async e=>{let n;let{context:i,value:{blockhash:t,lastValidBlockHeight:l}}=await a.getLatestBlockhashAndContext(),o=new g.fH({data:e,keys:[],programId:new g.J3("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr")});if("legacy"===v)n=new g.ZX({blockhash:t,lastValidBlockHeight:l,feePayer:r}).add(o);else{let e=new g.wu({payerKey:r,recentBlockhash:t,instructions:[o]});n=new g.Kt(e.compileToV0Message())}let c=await s(n,a,{minContextSlot:i.slot});return[c,await a.confirmTransaction({blockhash:t,lastValidBlockHeight:l,signature:c})]},[a,r,s]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(B.A,{fullWidth:!0,variant:"contained",children:[(0,t.jsx)(k.A,{disabled:null==r||!i,loading:h,onClick:async()=>{if(null!=r&&null!=s){x(!0);try{let e=await m(T.from(i));if(e){let[n,i]=e,{value:{err:a}}=i;a?l("Failed to record message:"+(a instanceof Error?a.message:a),{variant:"error"}):l("Message recorded",{action(){let e="https://explorer.solana.com/tx/"+n+"?cluster="+N.B.Devnet;return(0,t.jsx)(w.A,{color:"inherit",href:e,target:"_blank",children:"View"})},variant:"success"})}}finally{x(!1)}}},variant:"contained",children:n}),(0,t.jsx)(w.A,{disabled:null==r,onClick:()=>{u(!0)},sx:{flexBasis:0},children:(0,t.jsx)(S.A,{fontSize:"small"})})]}),(0,t.jsx)(F.A,{open:d,onClose:()=>{u(!1)},children:(0,t.jsxs)(_.A,{children:[(0,t.jsx)(M.A,{children:"Clicking “Record” will send a transaction that records the text you've written on the Solana blockchain using the Memo program."}),(0,t.jsx)(E.A,{children:(0,t.jsx)(w.A,{autoFocus:!0,onClick:()=>{u(!1)},children:"Got it"})})]})})]})}var W=i(8675);function X(e){let{connected:n,signIn:i}=(0,A.v)(),l=(0,p.A)(async()=>{if(i){let e={domain:window.location.host,statement:"Sign in to Example Web App",uri:window.location.origin},n=await i(e);if(!(0,W.kG)(e,n))throw Error("Sign In verification failed!")}else throw Error("Sign In not available, wallet does not support sign in")},[i]);return(0,t.jsx)(w.A,{...e,disabled:n,onClick:l})}function q(e){let{children:n,message:i}=e,{enqueueSnackbar:l}=(0,y.dh)(),{publicKey:a,signMessage:s}=(0,A.v)(),[o,d]=(0,c.useState)(null),[u,h]=(0,c.useState)(!1),x=(0,p.A)(async e=>await s(e),[s]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(B.A,{fullWidth:!0,variant:"outlined",children:[(0,t.jsx)(w.A,{disabled:null==a||!i,onClick:async()=>{if(null==a)return;let e=new Uint8Array(i.split("").map(e=>e.charCodeAt(0))),n=await x(e);n&&l("Message signed",{action:()=>(0,t.jsx)(w.A,{color:"inherit",onClick:()=>d(n),children:"View Signature"}),variant:"success"})},children:n}),(0,t.jsx)(w.A,{disabled:null==a,onClick:()=>{h(!0)},sx:{flexBasis:0},children:(0,t.jsx)(S.A,{fontSize:"small"})})]}),(0,t.jsx)(F.A,{open:u,onClose:()=>{h(!1)},children:(0,t.jsxs)(_.A,{children:[(0,t.jsx)(M.A,{children:"Clicking “Sign Message” will sign the text you've written and display the signature."}),(0,t.jsx)(E.A,{children:(0,t.jsx)(w.A,{autoFocus:!0,onClick:()=>{h(!1)},children:"Got it"})})]})}),(0,t.jsx)(F.A,{open:null!=o,onClose:()=>{d(null)},children:(0,t.jsxs)(_.A,{children:[(0,t.jsx)(M.A,{children:(0,t.jsx)(r.A,{sx:{wordBreak:"break-all"},children:o?btoa(String.fromCharCode.call(null,...o)):null})}),(0,t.jsx)(E.A,{children:(0,t.jsx)(w.A,{autoFocus:!0,onClick:()=>{d(null)},children:"Neat!"})})]})})]})}var H=i(1118),I=i(8847),K=i.n(I);let V=(0,H.Ay)("div")(e=>{let{theme:n}=e;return n.mixins.toolbar}),z=K()(()=>i.e(339).then(i.bind(i,7339)),{loadableGenerated:{webpack:()=>[7339]},ssr:!1}),D=()=>{let{publicKey:e}=(0,A.v)(),[n,i]=(0,c.useState)("");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.A,{position:"fixed",children:(0,t.jsxs)(a.A,{children:[(0,t.jsx)(r.A,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Mobile web dApp"}),e?(0,t.jsx)(m,{publicKey:e}):(0,t.jsx)(z,{color:"inherit",variant:"outlined",children:"Connect"})]})}),(0,t.jsx)(V,{}),(0,t.jsxs)(s.A,{p:2,spacing:2,flexGrow:1,children:[(0,t.jsx)(r.A,{children:"Write a message to record on the blockchain."}),(0,t.jsx)(o.A,{disabled:null==e,label:"What's on your mind?",onChange:e=>{i(e.target.value)},value:n}),(0,t.jsx)(G,{message:n,children:"Record Message"}),(0,t.jsx)(q,{message:n,children:"Sign Message"}),(0,t.jsx)(C,{children:"Fund Account (devnet)"}),e?(0,t.jsx)(b,{color:"error",variant:"outlined",children:"Disconnect"}):(0,t.jsx)(X,{variant:"outlined",children:"Sign In"})]})]})}},6760:(e,n,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return i(5616)}])},9142:(e,n,i)=>{"use strict";i.d(n,{A:()=>l});var t=i(4232);function l(e,n){return(0,t.useCallback)(async function(){for(var n=arguments.length,i=Array(n),t=0;t<n;t++)i[t]=arguments[t];try{return await e(...i)}catch(e){}},[...n||[]])}}},e=>{var n=n=>e(e.s=n);e.O(0,[884,636,593,792],()=>n(6760)),_N_E=e.O()}]);