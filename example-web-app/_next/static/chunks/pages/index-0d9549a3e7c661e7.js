(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{6760:(e,n,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return l(9525)}])},9142:(e,n,l)=>{"use strict";l.d(n,{A:()=>t});var i=l(4232);function t(e,n){return(0,i.useCallback)(async function(){for(var n=arguments.length,l=Array(n),i=0;i<n;i++)l[i]=arguments[i];try{return await e(...l)}catch(e){}},[...n||[]])}},9525:(e,n,l)=>{"use strict";l.r(n),l.d(n,{default:()=>R});var i=l(7876),t=l(5500),a=l(7009),r=l(9794),s=l(2474),o=l(5191),c=l(4232),d=l(9017),u=l(7957),h=l(4760),x=l(5756),A=l(7710),g=l(5331),f=l(1893),j=l(8149);function w(e){let{publicKey:n}=e,{connection:l}=(0,A.w)(),t=(0,c.useCallback)(async function(e){return await l.getBalance(n)},[l,n]),{data:a}=(0,j.Ay)("accountBalance",t,{suspense:!0}),r=(0,c.useMemo)(()=>new Intl.NumberFormat(void 0,{maximumFractionDigits:1}).format((a||0)/f.Sr),[a]),{wallet:s}=(0,g.v)();return(0,c.useEffect)(()=>{if(s){function e(){(0,j.Tk)("accountBalance",0,{revalidate:!1})}return s.adapter.on("disconnect",e),()=>{s.adapter.off("disconnect",e)}}},[s]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.A,{component:"span",fontSize:22,lineHeight:0,position:"relative",mr:.4,top:-2,sx:{verticalAlign:"middle"},children:"◎"}),r]})}function m(e){let{publicKey:n}=e,l=(0,c.useMemo)(()=>null==n?void 0:n.toBase58(),[n]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.A,{color:"info",sx:{marginRight:1},label:(0,i.jsx)(c.Suspense,{fallback:(0,i.jsx)(u.A,{color:"inherit",size:18,sx:{verticalAlign:"middle"}}),children:(0,i.jsx)(w,{publicKey:n})})}),(0,i.jsx)(r.A,{children:(0,i.jsx)(h.A,{color:"inherit",href:"https://explorer.solana.com/address/".concat(l,"?cluster=devnet"),rel:"noreferrer",target:"_blank",underline:"none",children:(0,i.jsx)("code",{children:l.slice(0,8)})})})]})}var v=l(7737),p=l(9142);function k(e){let{connected:n,disconnect:l}=(0,g.v)(),t=(0,p.A)(l,[l]);return(0,i.jsx)(v.A,{...e,disabled:!n,onClick:t})}var y=l(3801),b=l(3517);function C(e){let{children:n}=e,{publicKey:l}=(0,g.v)(),{connection:t}=(0,A.w)(),{mutate:a}=(0,j.iX)(),{enqueueSnackbar:r}=(0,b.dh)(),[s,o]=(0,c.useState)(!1),d=(0,p.A)(async e=>{let n=await t.requestAirdrop(e,1e8);return await t.confirmTransaction(n)},[t]);return(0,i.jsx)(y.A,{loading:s,color:"primary",disabled:null==l,onClick:async()=>{if(null!=l){o(!0);try{let e=await d(l);if(e){let{value:{err:n}}=e;n?r("Failed to fund account: "+(n instanceof Error?n.message:n),{variant:"error"}):(r("Funding successful",{variant:"success"}),a("accountBalance",e=>e+1e8))}}finally{o(!1)}}},variant:"outlined",children:n})}var S=l(3328),B=l(6741),F=l(3450),M=l(558),T=l(6482),_=l(8523),E=l(7568),N=l(2909).Buffer;function W(e){let{children:n,message:l}=e,{enqueueSnackbar:t}=(0,b.dh)(),{connection:a}=(0,A.w)(),{publicKey:r,sendTransaction:s,wallet:o}=(0,g.v)(),[d,u]=(0,c.useState)(!1),[h,x]=(0,c.useState)(!1),j=null==o?void 0:o.adapter.supportedTransactionVersions,w=(null==j?void 0:j.has(0))?0:"legacy",m=(0,p.A)(async e=>{let n,{context:l,value:{blockhash:i,lastValidBlockHeight:t}}=await a.getLatestBlockhashAndContext(),o=new f.fH({data:e,keys:[],programId:new f.J3("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr")});if("legacy"===w)n=new f.ZX({blockhash:i,lastValidBlockHeight:t,feePayer:r}).add(o);else{let e=new f.wu({payerKey:r,recentBlockhash:i,instructions:[o]});n=new f.Kt(e.compileToV0Message())}let c=await s(n,a,{minContextSlot:l.slot});return[c,await a.confirmTransaction({blockhash:i,lastValidBlockHeight:t,signature:c})]},[a,r,s]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(B.A,{fullWidth:!0,variant:"contained",children:[(0,i.jsx)(y.A,{disabled:null==r||!l,loading:h,onClick:async()=>{if(null!=r&&null!=s){x(!0);try{let e=await m(N.from(l));if(e){let[n,l]=e,{value:{err:a}}=l;a?t("Failed to record message:"+(a instanceof Error?a.message:a),{variant:"error"}):t("Message recorded",{action(){let e="https://explorer.solana.com/tx/"+n+"?cluster="+E.B.Devnet;return(0,i.jsx)(v.A,{color:"inherit",href:e,target:"_blank",children:"View"})},variant:"success"})}}finally{x(!1)}}},variant:"contained",children:n}),(0,i.jsx)(v.A,{disabled:null==r,onClick:()=>{u(!0)},sx:{flexBasis:0},children:(0,i.jsx)(S.A,{fontSize:"small"})})]}),(0,i.jsx)(F.A,{open:d,onClose:()=>{u(!1)},children:(0,i.jsxs)(M.A,{children:[(0,i.jsx)(T.A,{children:"Clicking “Record” will send a transaction that records the text you've written on the Solana blockchain using the Memo program."}),(0,i.jsx)(_.A,{children:(0,i.jsx)(v.A,{autoFocus:!0,onClick:()=>{u(!1)},children:"Got it"})})]})})]})}var q=l(8675);function G(e){let{connected:n,signIn:l}=(0,g.v)(),t=(0,p.A)(async()=>{if(l){let e={domain:window.location.host,statement:"Sign in to Example Web App",uri:window.location.origin},n=await l(e);if(!(0,q.kG)(e,n))throw Error("Sign In verification failed!")}else throw Error("Sign In not available, wallet does not support sign in")},[l]);return(0,i.jsx)(v.A,{...e,disabled:n,onClick:t})}var H=l(1897),V=l(2909).Buffer;function X(e){let{children:n,message:l}=e,{enqueueSnackbar:t}=(0,b.dh)(),{connection:a}=(0,A.w)(),{publicKey:s,signTransaction:o,wallet:d}=(0,g.v)(),[u,h]=(0,c.useState)(null),[x,j]=(0,c.useState)(!1),w=null==d?void 0:d.adapter.supportedTransactionVersions,m=(null==w?void 0:w.has(0))?0:"legacy",k=(0,p.A)(async e=>{let n,{context:l,value:{blockhash:i,lastValidBlockHeight:t}}=await a.getLatestBlockhashAndContext(),r=new f.fH({data:e,keys:[],programId:new f.J3("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr")});if("legacy"===m)n=new f.ZX({blockhash:i,lastValidBlockHeight:t,feePayer:s}).add(r);else{let e=new f.wu({payerKey:s,recentBlockhash:i,instructions:[r]});n=new f.Kt(e.compileToV0Message())}return await o(n)},[a,s,o]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(B.A,{fullWidth:!0,variant:"contained",children:[(0,i.jsx)(v.A,{disabled:null==s||!l,onClick:async()=>{if(null==s||null==o)return;let e=await k(V.from(l));e&&e&&t("Transaction signed",{action:()=>(0,i.jsx)(v.A,{color:"inherit",onClick:()=>h(e),children:"View Signature"}),variant:"success"})},children:n}),(0,i.jsx)(v.A,{disabled:null==s,onClick:()=>{j(!0)},sx:{flexBasis:0},children:(0,i.jsx)(S.A,{fontSize:"small"})})]}),(0,i.jsx)(F.A,{open:x,onClose:()=>{j(!1)},children:(0,i.jsxs)(M.A,{children:[(0,i.jsx)(T.A,{children:"Clicking “Sign Tx” will sign a memo transaction that records the text you've written on the Solana blockchain using the Memo program. The transaction will not be sent to the network."}),(0,i.jsx)(_.A,{children:(0,i.jsx)(v.A,{autoFocus:!0,onClick:()=>{j(!1)},children:"Got it"})})]})}),(0,i.jsx)(F.A,{open:null!=u,onClose:()=>{h(null)},children:(0,i.jsxs)(M.A,{children:[(0,i.jsx)(T.A,{children:(0,i.jsx)(r.A,{sx:{wordBreak:"break-all"},children:u?(0,H.Y)(u)?btoa(String.fromCharCode.call(null,...u.signatures[0])):btoa(String.fromCharCode.call(null,...new Uint8Array(u.signature))):null})}),(0,i.jsx)(_.A,{children:(0,i.jsx)(v.A,{autoFocus:!0,onClick:()=>{h(null)},children:"Neat!"})})]})})]})}function K(e){let{children:n,message:l}=e,{enqueueSnackbar:t}=(0,b.dh)(),{publicKey:a,signMessage:s}=(0,g.v)(),[o,d]=(0,c.useState)(null),[u,h]=(0,c.useState)(!1),x=(0,p.A)(async e=>await s(e),[s]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(B.A,{fullWidth:!0,variant:"outlined",children:[(0,i.jsx)(v.A,{disabled:null==a||!l,onClick:async()=>{if(null==a)return;let e=new Uint8Array(l.split("").map(e=>e.charCodeAt(0))),n=await x(e);n&&t("Message signed",{action:()=>(0,i.jsx)(v.A,{color:"inherit",onClick:()=>d(n),children:"View Signature"}),variant:"success"})},children:n}),(0,i.jsx)(v.A,{disabled:null==a,onClick:()=>{h(!0)},sx:{flexBasis:0},children:(0,i.jsx)(S.A,{fontSize:"small"})})]}),(0,i.jsx)(F.A,{open:u,onClose:()=>{h(!1)},children:(0,i.jsxs)(M.A,{children:[(0,i.jsx)(T.A,{children:"Clicking “Sign Message” will sign the text you've written and display the signature."}),(0,i.jsx)(_.A,{children:(0,i.jsx)(v.A,{autoFocus:!0,onClick:()=>{h(!1)},children:"Got it"})})]})}),(0,i.jsx)(F.A,{open:null!=o,onClose:()=>{d(null)},children:(0,i.jsxs)(M.A,{children:[(0,i.jsx)(T.A,{children:(0,i.jsx)(r.A,{sx:{wordBreak:"break-all"},children:o?btoa(String.fromCharCode.call(null,...o)):null})}),(0,i.jsx)(_.A,{children:(0,i.jsx)(v.A,{autoFocus:!0,onClick:()=>{d(null)},children:"Neat!"})})]})})]})}var I=l(1118),z=l(8847),D=l.n(z);let L=(0,I.Ay)("div")(e=>{let{theme:n}=e;return n.mixins.toolbar}),P=D()(()=>l.e(339).then(l.bind(l,7339)),{loadableGenerated:{webpack:()=>[7339]},ssr:!1}),R=()=>{let{publicKey:e}=(0,g.v)(),[n,l]=(0,c.useState)("");return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.A,{position:"fixed",children:(0,i.jsxs)(a.A,{children:[(0,i.jsx)(r.A,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Mobile web dApp"}),e?(0,i.jsx)(m,{publicKey:e}):(0,i.jsx)(P,{color:"inherit",variant:"outlined",children:"Connect"})]})}),(0,i.jsx)(L,{}),(0,i.jsxs)(s.A,{p:2,spacing:2,flexGrow:1,children:[(0,i.jsx)(r.A,{children:"Write a message to record on the blockchain."}),(0,i.jsx)(o.A,{disabled:null==e,label:"What's on your mind?",onChange:e=>{l(e.target.value)},value:n}),(0,i.jsx)(W,{message:n,children:"Record Message"}),(0,i.jsx)(X,{message:n,children:"Sign Tx"}),(0,i.jsx)(K,{message:n,children:"Sign Message"}),(0,i.jsx)(C,{children:"Fund Account (devnet)"}),e?(0,i.jsx)(k,{color:"error",variant:"outlined",children:"Disconnect"}):(0,i.jsx)(G,{variant:"outlined",children:"Sign In"})]})]})}}},e=>{e.O(0,[884,636,593,792],()=>e(e.s=6760)),_N_E=e.O()}]);